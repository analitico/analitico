<div class="ao-item-view ao-endpoint-view">

    <section>
        <h2 class="mat-h2">Endpoint url</h2>
        <p class="mat-body">
            <code>{{endpointUrl}}</code>
        </p>
    </section>
    <section>
        <h2 class="mat-h2">Performance</h2>
        <div *ngIf="predictionPerformanceGraph">
            <h3 class="mat-h3">Response time (ms)</h3>
            <plotly-plot [data]="predictionPerformanceGraph.data" [layout]="predictionPerformanceGraph.layout">
            </plotly-plot>
        </div>

    </section>

    <section>
        <h2 class="mat-h2">Live predictions</h2>
        <div>
            <mat-list role="list" dense style="max-width: 400px; height: 200px; overflow-y: scroll;">
                <mat-list-item role="listitem" *ngFor="let prediction of livePredictions"
                    class="ao-live-prediction-list-item" [class.ao-is-new-item]="prediction.isNew">
                    {{prediction.attributes.created_at | date:'dd/MM/yyyy HH:mm:ss'}}: &nbsp;
                    <span
                        *ngIf="prediction.attributes.prediction && prediction.attributes.prediction.predictions">{{prediction.attributes.prediction.predictions.toString()}}
                    </span>
                </mat-list-item>

            </mat-list>
        </div>
    </section>
    <section>
        <h2 class="mat-h2">Test predictions</h2>
        <p class="mat-body">
            You can test your endpoint with sample data, or you can provide your own.<br>
            Click the "Pick some data for me!" button or enter your json input data and the click the "Predict" button
            below.
        </p>
        <div class="">
            <p>
                Input
                <button mat-flat-button (click)="selectRandomSample()" style="margin: 10px" color="accent"
                    *ngIf="predictionSamples && predictionSamples.length">Pick some data for me!</button>

            </p>
            <div class="ao-json-editor-container">
                <json-editor [options]="editorOptions" [data]="inputData" #inputEditor></json-editor>
            </div>
        </div>
        <div class="ao-margin-top-bottom ao-text-center">
            <button mat-raised-button (click)="predict()" style="margin: 10px" color="primary">Predict
            </button>

        </div>
        <div class="ao-margin-top-bottom">
            <p>Predictions
                <mat-progress-spinner mode="indeterminate" *ngIf="isProcessing" [diameter]="20" style="display: inline-block; margin-left: 10px; margin-top: 4px; position: relative;
                top: 4px;" [strokeWidth]="4">
                </mat-progress-spinner>
            </p>

            <mat-tab-group>
                <mat-tab label="Table">
                    <ng-template app-ao-anchor>
                        Loading...
                    </ng-template>
                </mat-tab>
                <mat-tab label="JSON">
                    <div class="ao-json-editor-container">
                        <json-editor [options]="predictionEditorOptions" [data]="predictionData"></json-editor>
                    </div>
                </mat-tab>

            </mat-tab-group>
        </div>
    </section>
</div>